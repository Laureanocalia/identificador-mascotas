<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Identificador de Mascotas</title>
</head>
<body>

  <h2>Identificador de Mascotas üêæ</h2>

  <input type="text" id="codigo" placeholder="Ingres√° el c√≥digo">
  <button id="btnConsultar">Consultar</button>

  <div id="resultado">Esperando...</div>

  <script>
  const API_URL = "https://script.google.com/macros/s/AKfycbzUu82duUb3kuG5ej2HgrZz3AZ5mvzLfRuSNgIlGRmzP3mgGrCo3m5VJys4doGj_169og/exec";

  function validar() {
    console.log("VALIDAR EJECUTADA");

    const codigo = document.getElementById("codigo").value.trim();
    const resultado = document.getElementById("resultado");

    if (!codigo) {
      resultado.textContent = "Ingres√° un c√≥digo.";
      return;
    }

    resultado.textContent = "Consultando...";

    // eliminar script previo si existe
    const oldScript = document.getElementById("jsonp");
    if (oldScript) oldScript.remove();

    // crear script JSONP
    const script = document.createElement("script");
    script.id = "jsonp";
    script.src = API_URL +
      "?code=" + encodeURIComponent(codigo) +
      "&callback=procesarRespuesta";

    document.body.appendChild(script);
  }

  <script>
function procesarRespuesta(data) {
  console.log("DATA:", data);

  const estado = document.getElementById("estado");

  if (!estado) {
    console.error("Elemento #estado no existe");
    return;
  }

  if (!data.exists) {
    estado.textContent = "‚ùå C√≥digo inexistente";
    return;
  }

  if (data.status === "NO_ACTIVADO") {
    estado.textContent = "‚ö†Ô∏è C√≥digo no activado";
    return;
  }

  if (data.status === "ACTIVO") {
    estado.textContent = "‚úÖ C√≥digo activo";
    return;
  }

  estado.textContent = "‚ö†Ô∏è Estado desconocido";
}

</script>


  
</body>
</html>
