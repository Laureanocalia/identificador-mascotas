<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Identificador de Mascotas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }
    input {
      padding: 10px;
      font-size: 16px;
      width: 220px;
      text-transform: uppercase;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 10px;
      cursor: pointer;
    }
    #mensaje {
      margin-top: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h2>ğŸ¾ Identificador de Mascotas</h2>
  <p>IngresÃ¡ el cÃ³digo grabado en el identificador</p>

  <input id="codigo" placeholder="PET-XXXXXX" />
  <br>
  <button id="btnValidar" type="button">Continuar</button>

  <div id="mensaje"></div>

  <script>
  const API_URL = "https://script.google.com/macros/s/XXXX/exec";

  function validar() {
    const codigo = document.getElementById("codigo").value.trim();
    const resultado = document.getElementById("resultado");

    if (!codigo) {
      resultado.textContent = "IngresÃ¡ un cÃ³digo vÃ¡lido.";
      return;
    }

    resultado.textContent = "Consultando...";

    fetch(API_URL + "?code=" + encodeURIComponent(codigo))
      .then(res => res.json())
      .then(data => {
        console.log("Respuesta:", data);

        // âŒ CÃ³digo inexistente
        if (!data.exists) {
          resultado.textContent = "El cÃ³digo ingresado no existe.";
          return;
        }

        // ğŸŸ¥ Existe pero NO estÃ¡ activado
        if (data.status === "NO_ACTIVADO") {
          resultado.textContent = "Este identificador aÃºn no estÃ¡ activado.";
          return;
        }

        // ğŸŸ¢ ACTIVO (lo dejamos preparado)
        if (data.status === "ACTIVO") {
          resultado.innerHTML = `
            <strong>Mascota:</strong> ${data.mascota}<br>
            <strong>Contacto:</strong> ${data.familiar}<br><br>
            <a href="tel:${data.telefono}">
              <button>Llamar ğŸ“</button>
            </a>
          `;
          return;
        }

        resultado.textContent = "Estado desconocido.";
      })
      .catch(err => {
        console.error(err);
        resultado.textContent = "Error al consultar el cÃ³digo.";
      });
  }
</script>


</body>
</html>
